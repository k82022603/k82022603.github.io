name: Sync Wiki to Pages
on:
  schedule:
    - cron: "0 * * * *"    # ë§¤ ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰
  workflow_dispatch:        # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  sync:
    runs-on: ubuntu-latest
    
    # ğŸŒŸ ì¶”ê°€ëœ ë¶€ë¶„: GITHUB_TOKENì— ì“°ê¸° ê¶Œí•œ ë¶€ì—¬
    permissions:
      contents: write
      
    steps:
      - name: Checkout Pages repository
        uses: actions/checkout@v4
        
      - name: Clone Wiki repository
        run: |
          git clone https://github.com/k82022603/k82022603.github.io.wiki.git wiki-source
          
      - name: Prepare docs/wiki folder
        run: |
          rm -rf docs/wiki
          mkdir -p docs/wiki
          
      - name: Copy wiki markdown files
        run: |
          cp -r wiki-source/* docs/wiki/
          
      - name: Commit and push changes
        run: |
          git config user.email "github-actions@github.com"
          git config user.name "GitHub Actions"
          git add docs/wiki
          if git commit -m "Sync wiki â†’ pages"; then
            # NOTE: github-actions[bot] ì´ë©”ì¼ì€ github-actions@users.noreply.github.com ì´ í‘œì¤€ì´ì§€ë§Œ,
            # í˜„ì¬ ì‚¬ìš©í•˜ì‹œëŠ” ì´ë©”ì¼ë„ ì‘ë™í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì¼ë‹¨ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.
            git push
          else
            echo "No changes."
          fi
